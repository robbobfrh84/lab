<!doctype html>
<head>
  <meta charset="utf-8">
  <title>Camp Features</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="style.css">
  </script>
</head>
<body>
  <div>
    <img class='left-nav' src="left.png">
    <img class='right-nav' src="right.png">
    <div class="nav-bar"> </div>
  </div>
  <br>
  <div class='site-name'>
    Big Lake Camp
  </div>
  <div class="host-info">
    <span class='right-arrow'> &#10095; </span>
    <div class='icon-box'>
      <img class='bob' src="bob.png">
    </div>
    <div class='host-name'>
      <strong class='bold'> Hosted By </strong> <br> Bob
    </div>
    <div class='summery'> <br> &nbsp; &nbsp; &nbsp; &nbsp;
      Nestled in the beautiful Fall River Valley, this beautiful land overlooks farms and hillsides. There is ample hiking, biking, fishing and hunting. Donâ€™t miss the beautiful moonlight canoe ride on Lake Ahjumawi or drinks at the Buckhorn saloon!
    </div>
  </div>
  <div class='features-box'>
    <li class='feature-title pointer' onclick='openFeatures()'>
      Features
      <div id='featureIcon' class='plus-minus-toggle plus show lg'></div>
    </li>
    <ul id='show-features' class='ul-box fadeOut'></ul>
  </div>
</body>
<script src="camp_features.js"></script>
<script>

  showFeatures = (parentId, features, subfeature)=>{
    let parent = document.getElementById(parentId)
    // check if feature/subFeature has been created by checking it's display attribute.
    if (parent.style.display === ''){
      for (feature of features) {
        let li = document.createElement('li') // creat new <li> tag for feature
        // if the feature is not-presence show "x"-icon and give no-presence class
        if (!feature.presence) {
          li.className += !subfeature ? 'feature no-presence' : ' no-presence'
          li.innerHTML = '<span class="x"> &#10005; </span> '+feature.title
        } else {
          li.className += !subfeature ? ' feature' : ''
          li.innerHTML = '<span class="check"> &#10003; </span> '+feature.title
        }
        // feature has subfeature, give pointer class to idicate clickable
        if (feature.subfeatures.length) {
          li.className += !subfeature ? ' pointer' : ' pointer ul-feature'
          let div = document.createElement('div')
          div.className = "plus-minus-toggle plus show"
          div.className += subfeature ? ' subPMIcon' : ''
          li.appendChild(div)
          const subfeatures = feature.subfeatures
          const title = feature.title
          // li.addEventListener('click', ()=>{ showSubF(title, FEATURES) })
          var ul = document.createElement('ul') // creat new <ul> tag for subfeature
          ul.id = title
          // if (!feature.built) feature.open = false
          li.addEventListener('click', ()=>{
            showFeatures(title, subfeatures, true)
            // check the plus/minus icon's state and toggle by swapping class
            if (div.className.split(' ')[1] === 'plus') {
              div.className = "plus-minus-toggle show"
              div.className += subfeature ? ' subPMIcon' : ''
            } else {
              div.className = "plus-minus-toggle plus show"
              div.className += subfeature ? ' subPMIcon' : ''
            }
          })
        }
        // Add new list item to DOM
        parent.appendChild(li) // add feature <li> to parent <ul>
        if (feature.subfeatures.length) parent.appendChild(ul) // add subfeature <ul> to parent <ul>
      }
      // reveal features to use.
      parent.className += ' fadeIn'
      parent.style.display = 'block'
    // if the feature/subFeature has already been created, toggle it's display.
    } else { parent.style.display = parent.style.display === 'none' ? 'block' : 'none' }
  }

  openFeatures = ()=>{
    showFeatures('show-features', FEATURES)
    // check the plus/minus icon's state and toggle by swapping class
    if (featureIcon.className.split(' ')[1] === 'plus') {
      featureIcon.className = "plus-minus-toggle show lg"
    } else {
      featureIcon.className = "plus-minus-toggle plus show lg"
    }
  }

</script>
</html>
