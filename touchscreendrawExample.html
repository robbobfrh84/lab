<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width; initial-scale=0.75; maximum-scale=0.75; user-scalable=0;">
  <style>
      body { margin:0; padding:0; font-family:Arial; }
      #container { position:relative; }
      #sketchpad { border: 1px solid #000; }
  </style>
</head>
<body>
    <div id="container">
        <canvas id="sketchpad" width="400" height="400">Sorry, your browser is not supported.</canvas>
    </div>
    <a>X:</a><input id='xdown' value='0' style='color: red; width: 30px; display: inline-block;'></input>
    <a>Y:</a><input id='ydown' value='0' style='color: red; width: 30px; display: inline-block;'>mousedown</input>
    <br>
    <a>X:</a><input id='xloc' value='0' style=' width: 30px; display: inline-block;'></input>
    <a>Y:</a><input id='yloc' value='0' style=' width: 30px; display: inline-block;'>mousemove</input>
    <br>
    <a>X:</a><input id='xup' value='0' style='color: blue; width: 30px; display: inline-block;'></input>
    <a>Y:</a><input id='yup' value='0' style='color: blue; width: 30px; display: inline-block;'>mouseup</input>
    <br>
    <a>X:</a><input id='xtdown' value='0' style='color: red; width: 30px; display: inline-block;'></input>
    <a>Y:</a><input id='ytdown' value='0' style='color: red; width: 30px; display: inline-block;'>touchstart</input>
    <br>
    <a>X:</a><input id='xtloc' value='0' style=' width: 30px; display: inline-block;'></input>
    <a>Y:</a><input id='ytloc' value='0' style=' width: 30px; display: inline-block;'>touchmove</input>
    <br>
    <a>X:</a><input id='xtup' value='0' style='color: blue; width: 30px; display: inline-block;'></input>
    <a>Y:</a><input id='ytup' value='0' style='color: blue; width: 30px; display: inline-block;'>touchup</input>

    <script>
    window.addEventListener('load', function () {
        // get the canvas element and its context
        var canvas = document.getElementById('sketchpad');
        var context = canvas.getContext('2d');
        // create a drawer which tracks touch movements
        var drawer = {
            isDrawing: false,
            touchstart: function (coors) {
                context.beginPath();
                context.moveTo(coors.x, coors.y);
                this.isDrawing = true;
                document.getElementById('xdown').value = event.touches[0].pageX;
                document.getElementById('ydown').value = event.touches[0].pageY;
            },
            touchmove: function (coors) {
                if (this.isDrawing) {
                    context.lineTo(coors.x, coors.y);
                    context.stroke();
                }
            },
            touchend: function (coors) {
                if (this.isDrawing) {
                    this.touchmove(coors);
                    this.isDrawing = false;
                }
            }
        };
        // create a function to pass touch events and coordinates to drawer
        function draw(event) {
            var type = null;
            // map mouse events to touch events
            switch(event.type){
                case "mousedown":
                        event.touches = [];
                        event.touches[0] = {
                            pageX: event.pageX,
                            pageY: event.pageY
                        };
                        type = "touchstart";
                        document.getElementById('xdown').value = event.touches[0].pageX;
                        document.getElementById('ydown').value = event.touches[0].pageY;
                break;
                case "mousemove":
                        event.touches = [];
                        event.touches[0] = {
                            pageX: event.pageX,
                            pageY: event.pageY
                        };
                        type = "touchmove";
                        document.getElementById('xloc').value = event.touches[0].pageX;
                        document.getElementById('yloc').value = event.touches[0].pageY;
                break;
                case "mouseup":
                        event.touches = [];
                        event.touches[0] = {
                            pageX: event.pageX,
                            pageY: event.pageY
                        };
                        type = "touchend";
                        document.getElementById('xup').value = event.touches[0].pageX;
                        document.getElementById('yup').value = event.touches[0].pageY;
                break;
            }
            // touchend clear the touches[0], so we need to use changedTouches[0]
            var coors;
            if(event.type === "touchend") {
                coors = {
                    x: event.changedTouches[0].pageX,
                    y: event.changedTouches[0].pageY
                };
            }
            else {
                // get the touch coordinates
                coors = {
                    x: event.touches[0].pageX,
                    y: event.touches[0].pageY
                };
            }
            type = type || event.type
            // pass the coordinates to the appropriate handler
            drawer[type](coors);
        }
        // detect touch capabilities
        var touchAvailable = ('createTouch' in document) || ('ontouchstart' in window);

        // attach the touchstart, touchmove, touchend event listeners.
        if(touchAvailable){
            canvas.addEventListener('touchstart', draw, false);
            canvas.addEventListener('touchmove', draw, false);
            canvas.addEventListener('touchend', draw, false);
        }
        // attach the mousedown, mousemove, mouseup event listeners.
        else {
            canvas.addEventListener('mousedown', draw, false);
            canvas.addEventListener('mousemove', draw, false);
            canvas.addEventListener('mouseup', draw, false);
        }
        // prevent elastic scrolling
        document.body.addEventListener('touchmove', function (event) {
            event.preventDefault();
        }, false); // end body.onTouchMove
    }, false); // end window.onLoad
    </script>
</body>
</html>
