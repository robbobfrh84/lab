<!DOCTYPE html><html><head><meta charset="utf-8"><title> MEN CRUD Basics </title>
</head>
  <body>
    <span style='margin-right: 95px;'> Name </span><span> Quote </span>
    <form action="/quotes" method="POST" style="margin-bottom: 20px;">
      <input style='margin-right: 5px;' type="text" name="name">
      <input class="quote" type="text" name="quote">
      <button type="submit"> Create/post </button>
    </form>
  </body>
  <script type="text/javascript">

    onDOMContentLoaded = (()=>{ get('/quotes') })()
    var quotes

    function get(location){
      var request = new XMLHttpRequest();
      request.open('GET', '/quotes', true);
      request.onload = ()=>{
        if (request.status >= 200 && request.status < 400) {
          render(JSON.parse(request.responseText))
        } else { console.log('server error') }
      }
      request.onerror = () => { console.log('request error') }
      request.send();
    }

    function post(){
      console.log('post')
    }

    function put(ind){
      var newQuote = document.getElementsByClassName(quotes[ind]._id)
      for (var i = 0; i < newQuote.length; i++) {
        console.log(quotes[ind][newQuote[i].name], newQuote[i].value, newQuote[i].name)
        // !!! if they're NOT the same....
      }
    }

    function del(){
      console.log('del')
    }

    function render(data){
      quotes = data
      console.log(data)
      for (var i = 0; i < data.length; i++) {
        newTag(document.getElementsByTagName('body')[0], 'div',
          '<input class="'+data[i]._id + '" value="' + data[i].name + '" name="name"/>'
          + '&nbsp <input class="quote '+data[i]._id
          + '" value="' + data[i].quote + '" name="quote"/>'
          + '&nbsp <button onclick="put('+i+')"> Update/put </button>'
          + '&nbsp <button onclick="del()"> delete </button>')
      }
    }

    function newTag (parent, tag, innerHTML) {
      let child = document.createElement(tag)
      child.innerHTML = innerHTML
      parent.appendChild(child)
    }

  </script>
  <style media="screen">
    body {
      background-color: #ccc;
    }
    .quote {
      width: 400px;
    }
  </style>
</html>
