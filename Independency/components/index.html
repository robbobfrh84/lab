<!DOCTYPE html><html><head><meta charset="utf-8"><title>ComponentsJS</title>
  <link rel="stylesheet" href="main.css">
  <script type="text/javascript" src="component.js"></script>
  <link rel="import" href="components/navbar.html">
  <link rel="import" href="components/landing.html">
  <link rel="import" href="components/important.html">
</head>
<body>

<!-- <navbar-tag serve="data"></navbar-tag> -->
<navbar-tag serve="data"></navbar-tag>
<landing-tag serve="data"></landing-tag>

<span> - important.html as <em>important-tag</em> </span><br>
<important-tag serve="data.name1"></important-tag>
<important-tag serve="data"></important-tag>
<important-tag serve="data"></important-tag>

</body>
<script>

(()=>{

  var data = {
    string: 'Sup, Ya'+"'"+'ll',
    number: 49,
    navBarString: 'Clicked Navbar "Info" ',
    navBarNumber: 1000000,
    name1: 'Eric',
    name2: 'Dan',
    name3: 'Larry',
    num1: 1,
    num2: 2,
    num3: 3,
    nest: {
      n1: 101
    }
  }

  // var [ x, page ] = [ { 'data': data }, document.querySelector('important-tag') ]
  // page.setAttribute('serve', JSON.stringify(x[page.getAttribute('serve')]))
  //
  // var [ x, page ] = [ { 'data': data }, document.querySelector('landing-tag') ]
  // page.setAttribute('serve', JSON.stringify(x[page.getAttribute('serve')]))
  //
  // var [ x, page ] = [ { 'data': data }, document.querySelector('navbar-tag') ]
  // page.setAttribute('serve', JSON.stringify(x[page.getAttribute('serve')]))

  // dynamically serve each conponents
  // dynamically serve components with multiples (important-tag)
  // dynamically

  let getDir = (Obj, dir)=>{ // Grab 'var' elm string. html var name = JS var
    for (const p of dir.split(/[.\[\]]/).filter(Boolean)) Obj = Obj[p]
    return Obj
  }
  // console.log(getDir(data, 'name1')); console.log(getDir(data, 'nest')); console.log(getDir(data, 'nest.n1'))

  var imports = document.querySelectorAll('link[rel="import"]')
  for (const imp of imports) {
    let tagName = imp.href.split('/')[imports[0].href.split('/').length-1]
    tagName = tagName.split('.')[0] + '-tag'
    const components = document.querySelectorAll(tagName)
    for (const cmp of components) {
      let serve = cmp.getAttribute('serve')
      cmp.setAttribute('serve', JSON.stringify(getDir({ 'data': data }, serve)))
      console.log('cmp: ', cmp)
      // console.log('x: ', x)
      // console.log('serve: ', serve)
      // console.log('func:', getDir(data, serve))
    }
  }

})()

</script>
</html>

<!--  * * * * * *   TERMINAL STEPS TO PREVIEW IN BROWSER   * * * * * * * * * * *
- >>> cd    (to directory this file is located in)
- >>> http-server -c-1    (got to Local 8080 to work.
- Open browser and go to http://localhost:8080/ if this file is index.html
- IF other the main .html file isn't index.html, just add the endpoint of the file
- Like: http://localhost:8080/template.html
- ALSO, you can >>> http-server -c-1 -p 8010    (will change port to 8010. Somtimes there's  confict for some reason)
- ALSO, you may need to >>> sudo kill -9 PID    (If port has conflict (>>> top    (to find out PID))
- HELPFUL LINK: *** https://www.html5rocks.com/en/tutorials/webcomponents/imports/
-->

<!-- / / / / / / / / / / / / / / /    Notes    / / / / / / / / / / / / / / / / /

* TO DOs *
- how do we handle differnet page swaps.
- Do sub Imports work?
- Updating global Vars & where do what file is the host ? - Can we do all of the routing/updating on components.js (Even handle html.js?)
- Should we generate a custon local-id or change to id= to class=?
- Clean -> vars  lets  const
- Fix local Style to not need ::content on every elm.
- page build optimization look over.
- TEST in gh-pages looks like a CORS problem potentially(maybe gh-pages will just be a no go for it.).
- https://robbobfrh84.github.io/lab/Independency/components/index.html

-->
