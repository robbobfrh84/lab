<!DOCTYPE html><html lang='en'>
<title> Party Text </title>
<head>
  <meta charset='UTF-8'><meta http-equiv='X-UA-Compatible' content='ie=edge'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>

  
  <link rel="icon" type="image/png" sizes="200x200" href="bob8x8_black_circle_bg.png">
  <meta property="og:title" content="Party Text">
  <meta property="og:description" content="Custom text, with moves!">
  <meta property="og:image" content="https://github.com/robbobfrh84/lab/blob/main/website/pages/party_text/party_text.png?raw=true">

<style>
html {
  margin: 0;
}

body {
  position: absolute;
  width: 100%;
  padding-bottom: 5%;
  text-align: center;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: #bbb;
}
span {
  text-shadow: 3px 3px 3px #555;
  font-size:10px;
  color: rgba(5,5,5,0);
  transition: font-size 1s, color 1s;
}
</style>
</head>
<body>
  <h1>Hello World!</h1>
</body>
<script>
var minChar = 10;
var maxChar = 18;
var leftRightMargin = 2;
var heading = document.getElementsByTagName('h1')[0];
var arr = heading.innerHTML.split('');
heading.innerHTML = null;

var c = [];

for (var i = 0; i < arr.length; i++){
  var elm = document.createElement('span');
  elm.innerHTML = arr[i];
  heading.appendChild(c[i] = elm);

  c[i].addEventListener("transitionend", function(e) {
    var el = e.srcElement;
    if (e.propertyName === 'font-size'){
      var oldsize = parseInt(el.style.fontSize);
      el.style.fontSize = (random(minChar,maxChar)-leftRightMargin)+'vw';
      if (oldsize === parseInt(el.style.fontSize)){
        el.style.fontSize = (oldsize-leftRightMargin)+'vw';
      }
      el.style.color = rgbR();
      var s = random(200,800)/1000;
      el.style.transition = 'font-size '+s+'s, color 1s';
    }
  });
}

setTimeout(function(){ //debouce and fire all letters.
  for (var i = 0; i < c.length; i++){
    c[i].style.color = rgbR();
    c[i].style.fontSize = (random(minChar,maxChar)-leftRightMargin)+'vw';
  }
}, 100);

function random(max, min){
  return Math.floor(Math.random() * (max - min + 1) + min);
}
function rgbR(){
  return 'rgb('+random(0,255)+', '+random(0,255)+', '+random(0,255)+')';
}
</script>
</html>