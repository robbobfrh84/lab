<!doctype html>
<head>
	<meta charset="utf-8">
</head>
<body>
	<p id='light' style='margin: 5px;'>Light Sensor: </p>
	<p id='led' style='margin: 5px;'>LED Level: </p>
	<svg id='cont' width="1024" height="512" viewbox'0 0 1024 512'>
		<circle id='circle' cx="515" cy="256" r="3" stroke="red" stroke-width="2" fill="yellow"/>
	</svg>
	<script src="http://cdn.pubnub.com/pubnub-3.7.15.min.js"></script>
	<script>
	var svgElement = 'http://www.w3.org/2000/svg';
  var ardDate;
	var settings = {
		channel: 'test',
		publish_key: 'pub-c-d9caecb5-0430-44ca-b3bc-c40e492ef8b4',
		subscribe_key: 'sub-c-0a33ef98-1ef7-11e6-84f2-02ee2ddab7fe'
	};
	var pubnub = PUBNUB(settings);
  var cnt = 0; var line;

	pubnub.subscribe({
	  channel: 'test',
	  callback: function(m) {
	    ardData = m;
			light.innerHTML = 'Light Sensor: '+ardData.light;
			led.innerHTML = 'LED Level: '+ardData.led;
			divlight.style.width=ardData.light+'px';
			circle.setAttributeNS(null, 'r',ardData.light/4-75);
      var newObj = document.createElementNS(svgElement, 'line');
      newObj.setAttributeNS(null, 'x1', cnt); newObj.setAttributeNS(null, 'y1', 512);
      newObj.setAttributeNS(null, 'x2', cnt); newObj.setAttributeNS(null, 'y2', 512-(ardData.light/2-100)+'px');
      newObj.setAttributeNS(null, 'stroke', 'blue'); newObj.setAttributeNS(null, 'stroke-width', 1);
      document.getElementById('cont').appendChild(newObj);
      cnt++;
	  },
	  error: function(err) {console.log(err);}
	});
	</script>
  <div id='divlight' style="width: 10px; background-color: red;">light!!!</div>
</body>
</html>
